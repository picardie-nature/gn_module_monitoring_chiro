{
  "display_properties": [
    "id_dataset",
    "visit_date_min",
    "visit_type",
    "observers",
    "visit_duration",
    "hybrid_n_taxon",
    "hybrid_effectif",
    "event_type",
    "trace_guano",
    "comments"
  ],
  "display_list": [
    "visit_date_min",
    "observers",
    "hybrid_n_taxon",
    "hybrid_effectif",
    "event_type"
  ],
  "generic": {
    "id_base_visit": {
      "type_widget": "text",
      "attribut_label": "ID",
      "hidden": true
    },
    "id_base_site": {
      "type_widget": "text",
      "attribut_label": "ID SITE",
      "hidden": true
    },
    "id_module": {
      "type_widget": "text",
      "attribut_label": "ID Module",
      "hidden": true
    },
    "observers": {
      "type_widget": "datalist",
      "attribut_label": "Observateurs",
      "api": "users/menu/__MODULE.ID_LIST_OBSERVER",
      "application": "GeoNature",
      "keyValue": "id_role",
      "keyLabel": "nom_complet",
      "type_util": "user",
      "multiple": true,
      "required": true,
      "designStyle": "bootstrap"
    },

    "id_digitiser": {
      "type_widget": "text",
      "attribut_label": "Digitiser",
      "type_util": "user",
      "required": true,
      "hidden": true
    },
    "visit_date_min": {
      "type_widget": "date",
      "attribut_label": "Date",
      "required": true
    },
    "visit_date_max": {
      "type_widget": "date",
      "attribut_label": "Date (max)",
      "hidden": true
    },
    "comments": {
      "type_widget": "text",
      "attribut_label": "Commentaires"
    },
    "uuid_base_visit": {
      "attribut_label": "uuid"
    },
    "id_dataset": {
      "type_widget": "dataset",
      "type_util": "dataset",
      "attribut_label": "Jeu de données",
      "module_code": "__MODULE.MODULE_CODE",
      "creatable_in_module": "__MODULE.MODULE_CODE.MONITORINGS_VISITES",
      "required": true,
      "value": 37
    },
    "nb_observations": {
      "attribut_label": "Nombre d'observations"
    },
    "medias": {
      "type_widget": "medias",
      "attribut_label": "Médias",
      "schema_dot_table": "gn_monitoring.t_base_visits"
    },
    "id_nomenclature_tech_collect_campanule": {
      "type_widget": "datalist",
      "attribut_label": "Technique CAMPANULE (remplie automatiquement selon le type de visite)",
      "api": "nomenclatures/nomenclature/TECHNIQUE_OBS",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "required": true,
      "hidden": true
    }
  },
  "specific": {
    "id_base_site": {
      "type_widget": "site",
      "required": true,
      "attribut_label": "Choix du site"
    },
    "visit_type": {
      "type_widget": "datalist",
      "attribut_label": "Type de visite",
      "api": "nomenclatures/nomenclature/TYPE_VISITE_CHIRO",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "required": false,
      "multiple": false,
      "default" : {
        "cd_nomenclature": "Prospection"
      }
    },
    "visit_duration": {
      "type_widget": "number",
      "attribut_label": "Temps de prospection (en minutes)",
      "definition": "Durée dans le gîte",
      "required": false,
      "min": 1,
      "max": 50000
    },
    "hybrid_n_taxon": {
      "type_widget": "number",
      "attribut_label": "Nbre de taxons",
      "hidden": true,
      "required": false
    },
    "hybrid_effectif": {
      "type_widget": "number",
      "attribut_label": "Effectif total",
      "hidden": true,
      "required": false,
      "default": 0
    },
    "event_type": {
      "type_widget": "datalist",
      "attribut_label": "Type(s) d'évènement",
      "api": "nomenclatures/nomenclature/TYPE_EVENT",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "required": false,
      "multiple": true
    },
    "trace_guano": {
      "type_widget": "datalist",
      "attribut_label": "Trace(s) de guano",
      "api": "nomenclatures/nomenclature/TRACE_GUANO",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "required": false,
      "multiple": true
    }
  },
  "change": [
    "({objForm}) => {",
        "if (objForm.value.visit_type === 995) {",
            "objForm.patchValue({id_nomenclature_tech_collect_campanule: 315});",
        "}",
        "else if (objForm.value.visit_type === 996) {",
            "objForm.patchValue({id_nomenclature_tech_collect_campanule: 195});",
        "}",
        "else {",
            "objForm.patchValue({id_nomenclature_tech_collect_campanule: 317});",
        "}",
    "}",
    ""
  ]
}
